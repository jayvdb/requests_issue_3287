matrix:
  include:
    - language: python
      python: 2.7
      virtualenv:
        system_site_packages: true
      sudo: required
      dist: trusty
      addons:
        apt:
          sources:
            - debian-sid
          packages:
            - python-requests

script:
  - python show.py

  - python -c "import requests; requests.get('https://www.wikipedia.org/')"
  - python -c "import requests; requests.get('https://self-signed.badssl.com/')" || true
  - python -c "import requests; requests.get('https://testssl-expire-r2i2.disig.sk/index.en.html')" || true

  # Unbundle
  - sudo rm -rf $(python -c "import os.path, requests; print(os.path.dirname(requests.__file__))")/packages/urllib3

  - python show.py

  - python -c "import requests; requests.get('https://www.wikipedia.org/')"
  - python -c "import requests; requests.get('https://self-signed.badssl.com/')" || true
  - python -c "import requests; requests.get('https://testssl-expire-r2i2.disig.sk/index.en.html')" || true
